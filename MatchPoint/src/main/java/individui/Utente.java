package individui;

import java.sql.*;
import java.sql.Date;

import dataBase.DataBase;

//--------------------------------------------------------
//Code generated by Papyrus Java
//--------------------------------------------------------

public abstract class Utente {
	public int ID;
	public String nome;
	public String cognome;
	public Date dataNascita;
	public int eta;
	public String username;
	public String password;

	public Utente() {
		super();
	}

	/**
	 *  Metodo per esecuzione del login
	 * @param username
	 * @param password
	 * @return >0 succesful, =0 incorrect password, <0 no username in table
	 * 
	 */
	public static int login(String username, String password) {
		String sql="SELECT Password FROM Gestore WHERE Username ='"+username+"' UNION SELECT Password FROM Giocatore WHERE Username ='"+username+"'";//creazione query
		String url = "jdbc:sqlite:src/main/java/dataBase/matchpointDB.db"; //connessione al database
		String ris="";
		try  (Connection conn = DriverManager.getConnection(url)){
			ris = DataBase.eseguiSelect(conn, sql);//esecuzione select
		} catch (SQLException e) {
			e.printStackTrace();
		} //risultato della query
		System.out.println(ris);
		if(password.equals(ris)) {//confronto con password inserita
			return 1;
		}
		else if(ris.equals("")) {
			System.out.println("Username non trovato!");//se la select non produce risultati
			return -3;
		}
		else {
			System.out.println("Password errata!");
			return 0;
		}
		
	}

	public static int registrazione(String nome, String cognome, Date dataNascita, String email, String username,
			String password, String certificazioni, String competenze) {
		return 0;
	}
	
	public static int registrazione(String nome, String cognome, Date dataNascita, String email, String username,
			String password, String nomeSquadra) {
		return 0;
	}

}
